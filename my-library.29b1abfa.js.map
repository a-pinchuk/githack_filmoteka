{"mappings":"iiBAGAA,EAAA,S,4CCAA,IAAAC,EAAAD,EAAA,S,gFAmBA,SAASE,EAAKC,GACZ,IACE,IAAMC,EAAkBC,aAAaC,QAAQH,GAC7C,OAA2B,OAApBC,OAA2BG,EAAYC,KAAKC,MAAML,E,CACzD,MAAOM,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,EAI7C,IACEC,SAASC,iBAAiB,oBAQ5B,WACEH,QAAQI,IAAIb,EAAKc,EAAAC,uBACjB,IAAMC,EAAehB,EAAKc,EAAAC,sBAG1B,GAFAN,QAAQI,IAAIG,QAESX,IAAjBW,EACF,OAIFC,EAAmBD,E,IAjBnBE,EAAAC,IAAIC,kBAAkBR,iBAAiB,SAmBzC,SAA2BS,GACzBH,EAAAC,IAAIC,kBAAkBE,MAAMC,gBAAkB,UAC9CL,EAAAC,IAAIK,YAAYC,UAAY,GAC5B,IAAMT,EAAehB,EAAKc,EAAAC,sBAE1B,QAAqBV,IAAjBW,EACF,OAGFC,EAAmBD,E,IA3BnBE,EAAAC,IAAIO,gBAAgBd,iBAAiB,SA6BvC,SAAyBS,GACvBH,EAAAC,IAAIC,kBAAkBE,MAAMC,gBAAkB,UAC9CL,EAAAC,IAAIK,YAAYC,UAAY,GAC5B,IAAME,EAAa3B,EAAKc,EAAAc,oBAExB,QAAmBvB,IAAfsB,EACF,OAGFV,EAAmBU,E,IArCnB,MAAOnB,GACPC,QAAQI,IAAIL,E,UAwCCS,EAAmBY,G,OAAnBC,EAAkBC,MAAAC,KAAAC,U,UAAlBH,I,OAAAA,EAAfI,EAAAnC,EAAA,CAAAmC,EAAAC,GAAAC,MAAA,SAAAC,EAAkCR,G,IAGxBS,EACAC,E,kFADAD,EAAkBT,EAAIW,IAAG,W,MAACN,EAAAnC,EAAA,CAAAmC,EAAAC,GAAAC,MAAA,SAAAK,EAAMC,G,mFAAY,EAAAC,EAAAC,eAAcF,G,mGAA1BA,G,gCAAP,I,SACZG,QAAQC,IAAIR,G,OAAzBC,EAAIQ,EAAAC,MAEV,EAAAC,EAAAC,2BAA0BhC,EAAAC,IAAKoB,G,gDAE/B9B,QAAQI,IAAGkC,EAAAI,I,yDARArB,EAAkBC,MAAAC,KAAAC,U,CArCjCf,EAAAC,IAAIC,kBAAkBE,MAAMC,gBAAkB,U","sources":["src/indexLibrary.js","src/js/library.js"],"sourcesContent":["// Стили\n\n// Скрипты\nimport './js/api/api-vars';\nimport './js/api/fetch';\nimport './js/references/ref';\n\nimport './js/render/renderFilmByIdForLibrary';\nimport './js/render/modal-students';\nimport './js/library';\nimport './js/authentication/authentication';\n\nimport './js/modal';\nimport './js/localStorage';\n\n// import './js/requests/searchFilms';\nimport './js/render/renderSearchFilms';\n\n// Переключатель темы\nimport './js/switcher';\nimport './js/authentication/authentication';\n","// import { Notify } from 'notiflix/build/notiflix-notify-aio';\n// import { fetchTrendedFilms } from './api/fetch';\n// import { fetchSearchedFilms } from './api/fetch';\nimport { fetchFilmById } from './api/fetch';\nimport { fetchFilmGenres } from './api/fetch';\n// import { renderPopularFilms } from './render/renderPopularFilm';\nimport { renderFilmsByIdForLibrary } from './render/renderFilmByIdForLibrary';\n// import { renderFilms } from './render/renderHTML';\nimport { ref } from './references/ref';\n// import { options, pagination } from './pagination';\nimport { LOCALSTORAGE_WATCHED, LOCALSTORAGE_QUEUE } from './api/api-vars';\n\n// let textContent = '';\n// const  LOCALSTORAGE_WATCHED =  \"watched\";\n// const  LOCALSTORAGE_QUEUE =  \"queue\";\n\n// const dyk = [800815];\n// \t  localStorage.setItem(LOCALSTORAGE_WATCHED, JSON.stringify(dyk));\n\n// const qyk = [653851];\n// localStorage.setItem(LOCALSTORAGE_QUEUE, JSON.stringify(qyk));\n\nfunction load(key) {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n}\n\ntry {\n  document.addEventListener('DOMContentLoaded', onDOMContentLoaded);\n  ref.libraryWatchedBtn.addEventListener('click', onClickWatchedBtn);\n  ref.libraryQueueBtn.addEventListener('click', onClickQueueBtn);\n} catch (error) {\n  console.log(error);\n}\n// ref.libraryWatchedBtn.classList.add(\"modal-btn-rev\")\nref.libraryWatchedBtn.style.backgroundColor = '#ff6b01';\nfunction onDOMContentLoaded() {\n  console.log(load(LOCALSTORAGE_WATCHED));\n  const arrayWatched = load(LOCALSTORAGE_WATCHED);\n  console.log(arrayWatched);\n\n  if (arrayWatched === undefined) {\n    return;\n  }\n  // // console.log(arrayWatched);\n  // const ars =arrayWatched.map(ar => ar.id);\n  fetchAndRenderFilm(arrayWatched);\n}\nfunction onClickWatchedBtn(e) {\n  ref.libraryWatchedBtn.style.backgroundColor = '#ff6b01';\n  ref.galleryList.innerHTML = '';\n  const arrayWatched = load(LOCALSTORAGE_WATCHED);\n  // console.log(arrayWatched);\n  if (arrayWatched === undefined) {\n    return;\n  }\n  // const ars = arrayWatched.map(ar => ar.id);\n  fetchAndRenderFilm(arrayWatched);\n}\nfunction onClickQueueBtn(e) {\n  ref.libraryWatchedBtn.style.backgroundColor = '#000000';\n  ref.galleryList.innerHTML = '';\n  const arrayQueue = load(LOCALSTORAGE_QUEUE);\n  // console.log(arrayQueue);\n  if (arrayQueue === undefined) {\n    return;\n  }\n  // const ars = arrayQueue.map(ar => ar.id);\n  fetchAndRenderFilm(arrayQueue);\n}\n// const ids = [550, 299536, 383498];\n// console.log(ids.map(id => console.log(id)));\nasync function fetchAndRenderFilm(ids) {\n  try {\n    // console.log(ids);\n    const arrayOfPromises = ids.map(async id => await fetchFilmById(id));\n    const data = await Promise.all(arrayOfPromises);\n    //   console.log(data);\n    renderFilmsByIdForLibrary(ref, data);\n  } catch (error) {\n    console.log(error);\n  }\n}\n"],"names":["parcelRequire","$bpxeT","$93effc6fc56091ad$var$load","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","console","message","document","addEventListener","log","$iUA6h","LOCALSTORAGE_WATCHED","arrayWatched","$93effc6fc56091ad$var$fetchAndRenderFilm","$9oodp","ref","libraryWatchedBtn","e","style","backgroundColor","galleryList","innerHTML","libraryQueueBtn","arrayQueue","LOCALSTORAGE_QUEUE","ids","$93effc6fc56091ad$var$_fetchAndRenderFilm","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee1","arrayOfPromises","data","map","_callee","id","$5YnpJ","fetchFilmById","Promise","all","_ctx1","sent","$2fp79","renderFilmsByIdForLibrary","t0"],"version":3,"file":"my-library.29b1abfa.js.map"}