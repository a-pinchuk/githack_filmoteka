{"mappings":"kPACO,SAASA,EAA0BC,EAAKC,GAC7C,IAAMC,EAASD,EAAME,KAAI,SAAAC,G,IAAEC,EAAID,EAAJC,KACrBC,EAmBR,SAAwBA,GACvB,IAAIC,EAAgB,GACnBD,EAAOE,SAAQ,SAAAC,GACbF,EAAcG,KAAKD,EAAEE,K,IAIpBJ,EAAcK,OAAS,IACzBL,EAAgBA,EAAcM,OAAO,EAAG,GAAGC,KAAK,MAAQ,WAG1D,OAAOP,C,CA9BSQ,CAAcV,EAAKC,QAChC,MAAO,8CAC6CU,OADCX,EAAKY,GAAG,8DACiBD,OAA1BX,EAAKa,YAAY,WAEnCF,OAF4CX,EAAKc,MAAM,uHAIvDH,OAFAX,EAAKc,MAAM,yFAGZH,OADCV,EAAO,6CAERU,OADAX,EAAKe,aAAaC,MAAM,EAAG,GAAG,iDACDL,OAA7BX,EAAKiB,aAAaC,QAAQ,GAAG,6E,IAO7DT,KAAK,IACRd,EAAIwB,YAAYC,mBAAmB,YAAavB,E,gTChBlDwB,EAAA,S,sBDHAA,EAAA,S,WEGA,IAAAC,EAAAD,EAAA,S,sDAUOE,EAAwB,UACxBC,EAAsB,QAG1BC,aAAaC,QAAQH,EAAsBI,KAAKC,UADvC,CAAC,UAMb,SAASC,EAAMC,GACd,IACE,IAAMC,EAAkBN,aAAaO,QAAQF,GAC7C,OAA2B,OAApBC,OAA2BE,EAAYN,KAAKO,MAAMH,E,CACzD,MAAOI,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,EAP5CZ,aAAaC,QAAQF,EAAoBG,KAAKC,UADlC,CAAC,UAYb,IACCU,SAASC,iBAAiB,oBAO3B,WAEC,IAAMC,EAAeX,EAAMN,GAE3B,QAAmBU,IAAfO,EACH,OAIDC,EAAmBD,E,IAfnBE,EAAAC,IAAIC,kBAAkBL,iBAAiB,SAiBxC,SAA2BnC,GAC1BsC,EAAAC,IAAIxB,YAAY0B,UAAY,GAC5B,IAAML,EAAeX,EAAMN,GAE3B,QAAmBU,IAAfO,EACH,OAGDC,EAAmBD,E,IAxBnBE,EAAAC,IAAIG,gBAAgBP,iBAAiB,SA0BtC,SAAyBnC,GACxBsC,EAAAC,IAAIxB,YAAY0B,UAAY,GAC5B,IAAME,EAAalB,EAAML,GAEzB,QAAiBS,IAAbc,EACH,OAGDN,EAAmBM,E,IAjChB,MAAOZ,GACTC,QAAQY,IAAIb,E,UAoCCM,EAAmBQ,G,OAAnBC,EAAkBC,MAAAC,KAAAC,U,UAAlBH,I,OAAAA,EAAfI,EAAAhC,EAAA,CAAAgC,EAAAC,GAAAC,MAAA,SAAAC,EAAkCR,G,IAG1BS,EACA1D,E,kFADA0D,EAAkBT,EAAInD,IAAG,W,MAACwD,EAAAhC,EAAA,CAAAgC,EAAAC,GAAAC,MAAA,SAAAG,EAAO/C,G,mFAAa,EAAAgD,EAAAC,eAAcjD,G,mGAA3BA,G,gCAAR,I,SACZkD,QAAQC,IAAIL,G,OAAzB1D,EAAIgE,EAAAC,KAETvE,EAA0BgD,EAAAC,IAAK3C,G,gDAE/BoC,QAAQY,IAAGgB,EAAAE,I,yDARChB,EAAkBC,MAAAC,KAAAC,U","sources":["src/js/render/renderFilmByIdForLibrary.js","src/indexLibrary.js","src/js/library.js"],"sourcesContent":["import { ref } from '../references/ref';\nexport function renderFilmsByIdForLibrary(ref, datas) {\n  const markup = datas.map(({data}) => {\n  const genres = compareGenres(data.genres);\n \t\t return `<li class=\"photo__card\" data-modal-open id=${data.id}\">\n            <img src=\"https://image.tmdb.org/t/p/w500/${data.poster_path}\" alt=\"${data.title}\" \"loading=\"lazy\" class=\"movie__image\"/>\n          <div class=\"movie__info\">\n            <h2 class=\"film__title\">${data.title}</h2>\n            <div class=\"movie__details\">\n            <p class=\"movie__genre\">${genres}</p>\n            <p class=\"movie__year\">${data.release_date.slice(0, 4)}</p>\n\t\t\t\t<p class=\"movie__vote-average\">${data.vote_average.toFixed(1)}</p>\n          </div>\n          </div>\n      </li>\n    </ul>\n  </div>`;\n    })\n    .join('');\n  ref.libraryList.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction compareGenres (genres) {\n\tlet arrayOfGenres = [];\n \tgenres.forEach(e => {\n\t \t arrayOfGenres.push(e.name);\n\t\t }\n\t);\n \n\tif (arrayOfGenres.length > 2) {\n\t  arrayOfGenres = arrayOfGenres.splice(0, 2).join(', ') + ', Other';\n\t  \n\t}\n\treturn arrayOfGenres;\n}\n","// Стили\n\n// Скрипты\nimport './js/api/api-vars';\nimport './js/api/fetch';\nimport './js/references/ref';\n\n// import './js/fetchAndRenderPopularFilm';\nimport './js/render/renderFilmByIdForLibrary';\nimport './js/render/modal-students';\n import './js/library';\nimport './js/modal';\n\nimport './js/requests/searchFilms';\nimport './js/render/renderSearchFilms';\n\n// Переключатель темы\n\nimport './js/switcher';\nimport './js/authentication/authentication';\n","// import { Notify } from 'notiflix/build/notiflix-notify-aio';\n// import { fetchTrendedFilms } from './api/fetch';\n// import { fetchSearchedFilms } from './api/fetch';\nimport { fetchFilmById } from './api/fetch';\nimport { fetchFilmGenres } from './api/fetch';\n// import { renderPopularFilms } from './render/renderPopularFilm';\nimport { renderFilmsByIdForLibrary } from './render/renderFilmByIdForLibrary';\n// import { renderFilms } from './render/renderHTML';\nimport { ref } from './references/ref';\n// import { options, pagination } from './pagination';\n// import { LOCALSTORAGE_WATCHED, LOCALSTORAGE_QUEUE } from './api/api-vars';\n\n// let textContent = '';\nconst  LOCALSTORAGE_WATCHED =  \"watched\";\nconst  LOCALSTORAGE_QUEUE =  \"queue\";\n\nconst dyk = [800815];\n\t  localStorage.setItem(LOCALSTORAGE_WATCHED, JSON.stringify(dyk));\n\nconst qyk = [653851];\nlocalStorage.setItem(LOCALSTORAGE_QUEUE, JSON.stringify(qyk));\n\nfunction load (key) {\n\ttry {\n\t  const serializedState = localStorage.getItem(key);\n\t  return serializedState === null ? undefined : JSON.parse(serializedState);\n\t} catch (error) {\n\t  console.error(\"Get state error: \", error.message);\n\t}\n };\n\ntry {\n\tdocument.addEventListener('DOMContentLoaded', onDOMContentLoaded);\n\tref.libraryWatchedBtn.addEventListener('click', onClickWatchedBtn);\n\tref.libraryQueueBtn.addEventListener('click', onClickQueueBtn);\n\t } catch (error) {\n\t\tconsole.log(error);\n\t }\n\nfunction onDOMContentLoaded() {\n\t// console.log(ref.libraryWatchedBtn.style);\n\tconst arrayWatched = load (LOCALSTORAGE_WATCHED);\n\t//   console.log(arrayWatched);\n\tif (arrayWatched===undefined) {\n\t\treturn\n\t}\n\t// // console.log(arrayWatched);\n\t// const ars =arrayWatched.map(ar => ar.id);\n\tfetchAndRenderFilm(arrayWatched);\t\n}\nfunction onClickWatchedBtn(e) {\n\tref.libraryList.innerHTML = \"\";\n\tconst arrayWatched = load (LOCALSTORAGE_WATCHED);\n\t// console.log(arrayWatched);\n\tif (arrayWatched===undefined) {\n\t\treturn\n\t}\n\t// const ars = arrayWatched.map(ar => ar.id);\n\tfetchAndRenderFilm(arrayWatched);\n }\nfunction onClickQueueBtn(e) {\n\tref.libraryList.innerHTML = \"\";\n\tconst arrayQueue = load (LOCALSTORAGE_QUEUE);\n\t// console.log(arrayQueue);\n\tif (arrayQueue===undefined) {\n\t\treturn\n\t}\n\t// const ars = arrayQueue.map(ar => ar.id);\n\tfetchAndRenderFilm(arrayQueue);\n}\n// const ids = [550, 299536, 383498];\n// console.log(ids.map(id => console.log(id)));\nasync function fetchAndRenderFilm(ids) {\n\ttry {\n\t\t// console.log(ids);\n\t const arrayOfPromises = ids.map(async (id) => await fetchFilmById(id));\n\t const data = await Promise.all(arrayOfPromises);\n\t//   console.log(data);\n\t  renderFilmsByIdForLibrary(ref, data);\n\t} catch (error) {\n\t  console.log(error);\n\t}\n }\n\n"],"names":["$1a3076a7a6c1b32a$export$b43b458119400d44","ref1","datas","markup","map","param","data","genres","arrayOfGenres","forEach","e","push","name","length","splice","join","$1a3076a7a6c1b32a$var$compareGenres","concat","id","poster_path","title","release_date","slice","vote_average","toFixed","libraryList","insertAdjacentHTML","parcelRequire","$bpxeT","$93effc6fc56091ad$var$LOCALSTORAGE_WATCHED","$93effc6fc56091ad$var$LOCALSTORAGE_QUEUE","localStorage","setItem","JSON","stringify","$93effc6fc56091ad$var$load","key","serializedState","getItem","undefined","parse","error","console","message","document","addEventListener","arrayWatched","$93effc6fc56091ad$var$fetchAndRenderFilm","$9oodp","ref","libraryWatchedBtn","innerHTML","libraryQueueBtn","arrayQueue","log","ids","$93effc6fc56091ad$var$_fetchAndRenderFilm","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee1","arrayOfPromises","_callee","$5YnpJ","fetchFilmById","Promise","all","_ctx1","sent","t0"],"version":3,"file":"my-library.daacade4.js.map"}