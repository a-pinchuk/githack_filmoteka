{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-7b802fabc812b6cb.js","src/index.js","src/js/modal.js","node_modules/@parcel/runtime-js/lib/runtime-643dfc921be0cb37.js","src/js/scroll-to-top.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.f5c06dc2.js\\\",\\\"lp5u4\\\":\\\"sprite.94f83ab5.svg\\\",\\\"chicg\\\":\\\"my-library.ec3ab33b.css\\\",\\\"cQCmt\\\":\\\"my-library.307c0bf6.js\\\"}\"));","// Стили\n\n// Скрипты\nimport './js/api/api-vars';\nimport './js/api/fetch';\nimport './js/references/ref';\n\nimport './js/fetchAndRenderPopularFilm';\n// import './js/library';\nimport './js/render/modal-students';\nimport './js/modal';\nimport './js/localStorage';\nimport './js/requests/searchFilms';\nimport './js/render/renderSearchFilms';\nimport './js/scroll-to-top';\nimport './js/pagination'\n// Переключатель темы\n\nimport './js/switcher';\nimport './js/authentication/authentication';\n","import axios from 'axios';\nimport { log } from 'console';\nimport { API_KEY, TREND_URL, SEARCH_URL, ID_URL } from './api/api-vars';\nimport {\n  fetchFilmById,\n  fetchTrendedFilms,\n  fetchFilmTrailer,\n} from './api/fetch';\nimport { ref } from './references/ref';\nimport { loaderHide } from '../js/fetchAndRenderPopularFilm';\nimport { saveLocalStorage } from '../js/localStorage';\nimport sprite from '../images/sprite.svg';\n\nref.galleryList.addEventListener('click', openModal);\nref.closeModalBtn.addEventListener('click', closeModal);\nref.modal.addEventListener('keydown', closeModal);\nref.modal.addEventListener('click', closeModalbyClick);\n\nasync function openModal(item) {\n  document.addEventListener('keydown', closeModal);\n  ref.loader.style.display = 'flex';\n  const theme = JSON.parse(localStorage.getItem('darkmode'));\n\n  if (theme) {\n    ref.modalWindow.classList.add('modal-window-dark');\n    ref.closeIcon.classList.add('icon-close-dark');\n  } else {\n    ref.modalWindow.classList.remove('modal-window-dark');\n    ref.closeIcon.classList.remove('icon-close-dark');\n  }\n\n  ref.modal.classList.toggle('is-hidden');\n  document.body.style.overflow = 'hidden';\n\n  const li = item.target.closest('.photo__card');\n  const id = li.getAttribute('id');\n  const response = await fetchFilmById(id).then(r => {\n    return r.data;\n  });\n  renderBackdrop(response);\n  if (theme) {\n    ref.modalWrap.insertAdjacentHTML(\n      'afterBegin',\n      renderDarkMarkupModal(response)\n    );\n  } else {\n    ref.modalWrap.insertAdjacentHTML('afterBegin', renderMarkupModal(response));\n  }\n  loaderHide();\n  await saveLocalStorage();\n\n  const btnTreil = document.querySelector('.modal-btn-trailer');\n  const wrapIMG = document.querySelector('.modal-img-wrap');\n  btnTreil.addEventListener('click', onClickWatch);\n\n  async function onClickWatch() {\n    const li = item.target.closest('.photo__card');\n    const id = li.getAttribute('id');\n    const response = await fetchFilmTrailer(id).then(r => {\n      return r.data;\n    });\n    const officialTrail = response.results.length - 1;\n    wrapIMG.remove();\n    btnTreil.style.display = 'none';\n    ref.modalWrap.insertAdjacentHTML(\n      'afterBegin',\n      renderTrail(response.results[officialTrail])\n    );\n  }\n}\n\nfunction renderBackdrop(film) {\n  const backdrop = document.querySelector('.backdrop-info');\n  backdrop.style.backgroundImage = `url(https://image.tmdb.org/t/p/w1280/${film.backdrop_path})`;\n  backdrop.style.backgroundRepeat = 'no-repeat';\n  backdrop.style.backgroundSize = 'cover';\n  backdrop.style.backgroundPosition = 'center';\n}\n\nfunction renderMarkupModal(film) {\n  return `<div class=\"modal-img-wrap\">\n          <div class=\"modal-wrap-img-btn\"><img src=\"https://image.tmdb.org/t/p/w500/${\n            film.poster_path\n          }\" alt=\"${film.title}\" class=\"modal-image\"/>\n            <button type=\"button\" class=\"modal-btn-trailer\"><svg class=\"btn-trailer-icon\"><use href=\"${sprite}#icon-play\"></use></svg>\n          </button></div>\n      </div>\n      <div class=\"modal-info\">\n        <h2 class=\"modal-info-name\">${film.title}</h2>\n                <ul class=\"modal-info-list\">\n          <li class=\"modal-info-item\">\n            <p class=\"modal-info-name-value\">Vote / Votes</p>\n            <p class=\"modal-info-value\"><span class=\"modal-info-value-vote\">${\n              film.vote_average\n            }</span>/<span\n                class=\"modal-info-value-votes\"\n                >${film.vote_count}</span\n              ></p>\n          </li>\n          <li class=\"modal-info-item\">\n            <p class=\"modal-info-name-value\">Popularity</p>\n            <p class=\"modal-info-value\">${film.popularity}</p>\n          </li>\n          <li class=\"modal-info-item\">\n            <p class=\"modal-info-name-value\">Original Title</p>\n            <p class=\"modal-info-value\">${film.original_title}</p>\n          </li>\n          <li class=\"modal-info-item\">\n            <p class=\"modal-info-name-value\">Genre</p>\n            <p class=\"modal-info-value\">${film.genres\n              .map(item => item.name)\n              .join(', ')}</p>\n          </li>\n        </ul>\n        <p class=\"modal-info-pre-about\">About</p>\n        <p class=\"modal-info-about\">\n          ${film.overview}\n        </p>\n        <div class=\"btn-modal-wrap\">\n\t\t  <div class=\"modal-btn-wrap\">\n          <button type=\"button\" class=\"modal-btn modal-btn-watched\" data-watched=\"${\n            film.id\n          }\">\n            Add to watched\n          </button>\n\t\t\t <button type=\"button\" class=\"modal-btn modal-btn-watched\" data-watched-rem=\"${\n         film.id\n       }\">\n\t\t\t Rem to watched\n          </button>\n\t\t\t </div>\n\t\t\t <div class=\"modal-btn-wrap\">\n          <button type=\"button\" class=\"modal-btn modal-btn-queue\" data-queue=\"${\n            film.id\n          }\">\n            Add to queue\n          </button>\n\t\t\t <button type=\"button\" class=\"modal-btn modal-btn-queue\" data-queue-rem=\"${\n         film.id\n       }\">\n\t\t\t Rem to queue\n          </button>\n\t\t\t </div>\n        </div>\n      </div>`;\n}\nfunction renderDarkMarkupModal(film) {\n  return `<div class=\"modal-img-wrap\">\n          <div class=\"modal-wrap-img-btn\"><img src=\"https://image.tmdb.org/t/p/w500/${\n            film.poster_path\n          }\" alt=\"${film.title}\" class=\"modal-image\"/>\n            <button type=\"button\" class=\"modal-btn-trailer\"><svg class=\"btn-trailer-icon\"><use href=\"${sprite}#icon-play\"></use></svg>\n          </button></div>\n      </div>\n      <div class=\"modal-info\">\n        <h2 class=\"modal-info-name\">${film.title}</h2>\n        <ul class=\"modal-info-list\">\n          <li class=\"modal-info-item\">\n            <p class=\"modal-info-name-value\">Vote / Votes</p>\n            <p class=\"modal-info-value modal-info-value-dark\"><span class=\"modal-info-value-vote\">${\n              film.vote_average\n            }</span>/<span\n                class=\"modal-info-value-votes\"\n                >${film.vote_count}</span\n              ></p>\n          </li>\n          <li class=\"modal-info-item\">\n            <p class=\"modal-info-name-value\">Popularity</p>\n            <p class=\"modal-info-value-dark modal-info-value\">${\n              film.popularity\n            }</p>\n          </li>\n          <li class=\"modal-info-item\">\n            <p class=\"modal-info-name-value\">Original Title</p>\n            <p class=\"modal-info-value modal-info-value-dark\">${\n              film.original_title\n            }</p>\n          </li>\n          <li class=\"modal-info-item\">\n            <p class=\"modal-info-name-value\">Genre</p>\n            <p class=\"modal-info-value modal-info-value-dark\">${film.genres\n              .map(item => item.name)\n              .join(', ')}</p>\n          </li>\n        </ul>\n        <p class=\"modal-info-pre-about\">About</p>\n        <p class=\"modal-info-about\">\n          ${film.overview}\n        </p>\n        <div class=\"btn-modal-wrap\">\n\t\t  <div class=\"modal-btn-wrap\">\n          <button type=\"button\" class=\"modal-btn modal-btn-dark modal-btn-watched\" data-watched=\"${\n            film.id\n          }\">\n            Add to watched\n          </button>\n\t\t\t <button type=\"button\" class=\"modal-btn modal-btn-dark modal-btn-watched\" data-watched-rem=\"${\n         film.id\n       }\">\n\t\t\t Rem to watched\n          </button>\n\t\t\t </div>\n\t\t\t <div class=\"modal-btn-wrap\">\n          <button type=\"button\" class=\"modal-btn modal-btn-dark modal-btn-queue\" data-queue=\"${\n            film.id\n          }\">\n            Add to queue\n          </button>\n\t\t\t <button type=\"button\" class=\"modal-btn modal-btn-dark modal-btn-queue\" data-queue-rem=\"${\n         film.id\n       }\">\n\t\t\t Rem to queue\n          </button>\n\t\t\t </div>\n        </div>\n      </div>`;\n}\nfunction closeModal(e) {\n  const backdrop = document.querySelector('.backdrop-info');\n  if (e.key === 'Escape' || e.type === 'click') {\n    ref.modal.classList.toggle('is-hidden');\n    ref.modalWrap.innerHTML = '';\n    document.body.style.overflow = '';\n    backdrop.style.backgroundImage = '';\n    document.removeEventListener('keydown', closeModal);\n  }\n}\nfunction closeModalbyClick(e) {\n  const backdrop = document.querySelector('.backdrop-info');\n  if (e.target === e.currentTarget) {\n    ref.modal.classList.toggle('is-hidden');\n    ref.modalWrap.innerHTML = '';\n    document.body.style.overflow = '';\n    backdrop.style.backgroundImage = '';\n    document.removeEventListener('keydown', closeModal);\n  }\n}\n// =========НЕ ЗВАЖАЙ УВАГИ========TREILER===========НЕ ЗВАЖАЙ УВАГИ==============НЕ ЗВАЖАЙ УВАГИ===========\nfunction renderTrail({ key }) {\n  return `<iframe\n  width=\"375\"\n    height=\"478\"\n    src=\"https://www.youtube.com/embed/${key}\"\n    title=\"YouTube video player\"\n    frameborder=\"0\"\n    allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n    allowfullscreen\n    waitUntil()\n    class='modal-image'\n  ></iframe>`;\n}\n// =============НЕ ЗВАЖАЙ УВАГИ======TREILER========НЕ ЗВАЖАЙ УВАГИ=============НЕ ЗВАЖАЙ УВАГИ===============\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lp5u4\")).toString();","const scrollUp = document.querySelector('.scroll-up');\nconst scrollUpSirclePath = document.querySelector('.scroll-up__sircle-path');\nconst pathLength = scrollUpSirclePath.getTotalLength();\nconst offset = 400;\n\nscrollUpSirclePath.style.strokeDasharray = `${pathLength} ${pathLength}`;\nscrollUpSirclePath.style.transition = 'stroke-dashoffset 20ms';\n\nscrollUp.addEventListener('click', onScrollUp);\nwindow.addEventListener('scroll', onWindowScroll);\n\nfunction onScrollUp() {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n\nfunction onWindowScroll() {\n  updateDashoffset();\n\n  if (getScrollValue() >= offset) {\n    scrollUp.classList.add('scroll-up--active');\n  } else {\n    scrollUp.classList.remove('scroll-up--active');\n  }\n}\n\nfunction getScrollValue() {\n  return window.pageYOffset || document.documentElement.scrollTop;\n}\n\nfunction updateDashoffset() {\n  const height = document.documentElement.scrollHeight - window.innerHeight;\n  const dashoffset = pathLength - (getScrollValue() * pathLength) / height;\n\n  scrollUpSirclePath.style.strokeDashoffset = dashoffset;\n}\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$8a7e756c566dd1ea$var$closeModal","e","backdrop","document","querySelector","key","type","$3IenU","ref","modal","classList","toggle","modalWrap","innerHTML","body","style","overflow","backgroundImage","removeEventListener","$a4212a039eccdb43$exports","URL","resolve","import","meta","url","toString","galleryList","addEventListener","async","item","loader","display","theme","localStorage","getItem","modalWindow","add","closeIcon","remove","id1","target","closest","getAttribute","response1","$i2Aqx","fetchFilmById","then","r","data","film","backdrop_path","backgroundRepeat","backgroundSize","backgroundPosition","$8a7e756c566dd1ea$var$renderBackdrop","insertAdjacentHTML","poster_path","title","$parcel$interopDefault","vote_average","vote_count","popularity","original_title","genres","map","name","join","overview","$8a7e756c566dd1ea$var$renderMarkupModal","$58nxT","loaderHide","$31u3U","saveLocalStorage","btnTreil","wrapIMG","response","fetchFilmTrailer","officialTrail","results","$8a7e756c566dd1ea$var$renderTrail","closeModalBtn","currentTarget","$9c4d348a70143412$var$scrollUp","$9c4d348a70143412$var$scrollUpSirclePath","$9c4d348a70143412$var$pathLength","getTotalLength","$9c4d348a70143412$var$getScrollValue","window","pageYOffset","documentElement","scrollTop","strokeDasharray","transition","scrollTo","top","behavior","height","scrollHeight","innerHeight","dashoffset","strokeDashoffset","$9c4d348a70143412$var$updateDashoffset"],"version":3,"file":"index.f5c06dc2.js.map"}