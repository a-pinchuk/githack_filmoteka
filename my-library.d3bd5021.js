!function(){function t(t,e,n,a){Object.defineProperty(t,e,{get:n,set:a,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},o={},r=n.parcelRequire294f;null==r&&((r=function(t){if(t in a)return a[t].exports;if(t in o){var e=o[t];delete o[t];var n={id:t,exports:{}};return a[t]=n,e.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){o[t]=e},n.parcelRequire294f=r),r.register("iE7OH",(function(e,n){var a,o;t(e.exports,"register",(function(){return a}),(function(t){return a=t})),t(e.exports,"resolve",(function(){return o}),(function(t){return o=t}));var r={};a=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)r[e[n]]=t[e[n]]},o=function(t){var e=r[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),r.register("aNJCr",(function(e,n){var a;t(e.exports,"getBundleURL",(function(){return a}),(function(t){return a=t}));var o={};function r(t){return(""+t).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}a=function(t){var e=o[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(t)return r(t[2])}return"/"}(),o[t]=e),e}})),r("iE7OH").register(JSON.parse('{"kyHJv":"my-library.d3bd5021.js","ee16w":"sprite.94f83ab5.svg","chicg":"my-library.ec3ab33b.css","jUneY":"my-library.bfd4b809.js"}')),r("iUA6h"),r("5YnpJ"),r("9oodp"),r("2fp79"),r("gEbo1");var l=r("bpxeT"),i=r("2TvXO"),c=r("5YnpJ"),s=(c=r("5YnpJ"),r("2fp79")),d=r("9oodp"),u=r("iUA6h");function m(t){try{var e=localStorage.getItem(t);return null===e?void 0:JSON.parse(e)}catch(t){console.error("Get state error: ",t.message)}}try{document.addEventListener("DOMContentLoaded",(function(){console.log(m(u.LOCALSTORAGE_WATCHED));var t=m(u.LOCALSTORAGE_WATCHED);if(console.log(t),void 0===t)return;p(t)})),d.ref.libraryWatchedBtn.addEventListener("click",(function(t){d.ref.libraryWatchedBtn.style.backgroundColor="#ff6b01",d.ref.libraryList.innerHTML="";var e=m(u.LOCALSTORAGE_WATCHED);if(void 0===e)return;p(e)})),d.ref.libraryQueueBtn.addEventListener("click",(function(t){d.ref.libraryWatchedBtn.style.backgroundColor="#000000",d.ref.libraryList.innerHTML="";var e=m(u.LOCALSTORAGE_QUEUE);if(void 0===e)return;p(e)}))}catch(t){console.log(t)}function p(t){return f.apply(this,arguments)}function f(){return f=e(l)(e(i).mark((function t(n){var a,o;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=n.map(function(){var t=e(l)(e(i).mark((function t(n){return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.fetchFilmById)(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=4,Promise.all(a);case 4:o=t.sent,(0,s.renderFilmsByIdForLibrary)(d.ref,o),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),f.apply(this,arguments)}d.ref.libraryWatchedBtn.style.backgroundColor="#ff6b01",r("UL92Z");l=r("bpxeT"),i=r("2TvXO");r("cG2oh"),r("iUA6h");c=r("5YnpJ"),d=r("9oodp");var v,b=r("9YQhV"),y=r("UL92Z");function g(){return g=e(l)(e(i).mark((function t(n){var a,o,r,s,u,m,p,f;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=function(){return f.apply(this,arguments)},f=function(){return(f=e(l)(e(i).mark((function t(){var a,o,r,l;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.target.closest(".photo__card"),o=a.getAttribute("id"),t.next=4,(0,c.fetchFilmTrailer)(o).then((function(t){return t.data}));case 4:r=t.sent,l=r.results.length-1,m.remove(),u.style.display="none",d.ref.modalWrap.insertAdjacentHTML("afterBegin",E(r.results[l]));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)},document.addEventListener("keydown",L),d.ref.loader.style.display="flex",(a=JSON.parse(localStorage.getItem("darkmode")))?(d.ref.modalWindow.classList.add("modal-window-dark"),d.ref.closeIcon.classList.add("icon-close-dark")):(d.ref.modalWindow.classList.remove("modal-window-dark"),d.ref.closeIcon.classList.remove("icon-close-dark")),d.ref.modal.classList.toggle("is-hidden"),document.body.style.overflow="hidden",o=n.target.closest(".photo__card"),r=o.getAttribute("id"),t.next=12,(0,c.fetchFilmById)(r).then((function(t){return t.data}));case 12:return h(s=t.sent),a?d.ref.modalWrap.insertAdjacentHTML("afterBegin",k(s)):d.ref.modalWrap.insertAdjacentHTML("afterBegin",w(s)),(0,b.loaderHide)(),t.next=18,(0,y.saveLocalStorage)();case 18:u=document.querySelector(".modal-btn-trailer"),m=document.querySelector(".modal-img-wrap"),u.addEventListener("click",p);case 23:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function h(t){var e=document.querySelector(".backdrop-info");e.style.backgroundImage="url(https://image.tmdb.org/t/p/w1280/".concat(t.backdrop_path,")"),e.style.backgroundRepeat="no-repeat",e.style.backgroundSize="cover",e.style.backgroundPosition="center"}function w(t){return'<div class="modal-img-wrap">\n          <div class="modal-wrap-img-btn"><img src="https://image.tmdb.org/t/p/w500/'.concat(t.poster_path,'" alt="').concat(t.title,'" class="modal-image"/>\n            <button type="button" class="modal-btn-trailer"><svg class="btn-trailer-icon"><use href="').concat(e(v),'#icon-play"></use></svg>\n          </button></div>\n      </div>\n      <div class="modal-info">\n        <h2 class="modal-info-name">').concat(t.title,'</h2>\n                <ul class="modal-info-list">\n          <li class="modal-info-item">\n            <p class="modal-info-name-value">Vote / Votes</p>\n            <p class="modal-info-value"><span class="modal-info-value-vote">').concat(t.vote_average,'</span>/<span\n                class="modal-info-value-votes"\n                >').concat(t.vote_count,'</span\n              ></p>\n          </li>\n          <li class="modal-info-item">\n            <p class="modal-info-name-value">Popularity</p>\n            <p class="modal-info-value">').concat(t.popularity,'</p>\n          </li>\n          <li class="modal-info-item">\n            <p class="modal-info-name-value">Original Title</p>\n            <p class="modal-info-value">').concat(t.original_title,'</p>\n          </li>\n          <li class="modal-info-item">\n            <p class="modal-info-name-value">Genre</p>\n            <p class="modal-info-value">').concat(t.genres.map((function(t){return t.name})).join(", "),'</p>\n          </li>\n        </ul>\n        <p class="modal-info-pre-about">About</p>\n        <p class="modal-info-about">\n          ').concat(t.overview,'\n        </p>\n        <div class="btn-modal-wrap">\n\t\t  <div class="modal-btn-wrap">\n          <button type="button" class="modal-btn modal-btn-watched" data-watched="').concat(t.id,'">\n            Add to watched\n          </button>\n\t\t\t <button type="button" class="modal-btn modal-btn-watched" data-watched-rem="').concat(t.id,'">\n\t\t\t Rem to watched\n          </button>\n\t\t\t </div>\n\t\t\t <div class="modal-btn-wrap">\n          <button type="button" class="modal-btn modal-btn-queue" data-queue="').concat(t.id,'">\n            Add to queue\n          </button>\n\t\t\t <button type="button" class="modal-btn modal-btn-queue" data-queue-rem="').concat(t.id,'">\n\t\t\t Rem to queue\n          </button>\n\t\t\t </div>\n        </div>\n      </div>')}function k(t){return'<div class="modal-img-wrap">\n          <div class="modal-wrap-img-btn"><img src="https://image.tmdb.org/t/p/w500/'.concat(t.poster_path,'" alt="').concat(t.title,'" class="modal-image"/>\n            <button type="button" class="modal-btn-trailer"><svg class="btn-trailer-icon"><use href="').concat(e(v),'#icon-play"></use></svg>\n          </button></div>\n      </div>\n      <div class="modal-info">\n        <h2 class="modal-info-name">').concat(t.title,'</h2>\n        <ul class="modal-info-list">\n          <li class="modal-info-item">\n            <p class="modal-info-name-value">Vote / Votes</p>\n            <p class="modal-info-value modal-info-value-dark"><span class="modal-info-value-vote">').concat(t.vote_average,'</span>/<span\n                class="modal-info-value-votes"\n                >').concat(t.vote_count,'</span\n              ></p>\n          </li>\n          <li class="modal-info-item">\n            <p class="modal-info-name-value">Popularity</p>\n            <p class="modal-info-value-dark modal-info-value">').concat(t.popularity,'</p>\n          </li>\n          <li class="modal-info-item">\n            <p class="modal-info-name-value">Original Title</p>\n            <p class="modal-info-value modal-info-value-dark">').concat(t.original_title,'</p>\n          </li>\n          <li class="modal-info-item">\n            <p class="modal-info-name-value">Genre</p>\n            <p class="modal-info-value modal-info-value-dark">').concat(t.genres.map((function(t){return t.name})).join(", "),'</p>\n          </li>\n        </ul>\n        <p class="modal-info-pre-about">About</p>\n        <p class="modal-info-about">\n          ').concat(t.overview,'\n        </p>\n        <div class="btn-modal-wrap">\n\t\t  <div class="modal-btn-wrap">\n          <button type="button" class="modal-btn modal-btn-dark modal-btn-watched" data-watched="').concat(t.id,'">\n            Add to watched\n          </button>\n\t\t\t <button type="button" class="modal-btn modal-btn-dark modal-btn-watched" data-watched-rem="').concat(t.id,'">\n\t\t\t Rem to watched\n          </button>\n\t\t\t </div>\n\t\t\t <div class="modal-btn-wrap">\n          <button type="button" class="modal-btn modal-btn-dark modal-btn-queue" data-queue="').concat(t.id,'">\n            Add to queue\n          </button>\n\t\t\t <button type="button" class="modal-btn modal-btn-dark modal-btn-queue" data-queue-rem="').concat(t.id,'">\n\t\t\t Rem to queue\n          </button>\n\t\t\t </div>\n        </div>\n      </div>')}function L(t){var e=document.querySelector(".backdrop-info");"Escape"!==t.key&&"click"!==t.type||(d.ref.modal.classList.toggle("is-hidden"),d.ref.modalWrap.innerHTML="",document.body.style.overflow="",e.style.backgroundImage="",document.removeEventListener("keydown",L))}function E(t){var e=t.key;return'<iframe\n  width="375"\n    height="478"\n    src="https://www.youtube.com/embed/'.concat(e,'"\n    title="YouTube video player"\n    frameborder="0"\n    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"\n    allowfullscreen\n    waitUntil()\n    class=\'modal-image\'\n  ></iframe>')}v=r("aNJCr").getBundleURL("kyHJv")+r("iE7OH").resolve("ee16w"),d.ref.libraryList.addEventListener("click",(function(t){return g.apply(this,arguments)})),d.ref.closeModalBtn.addEventListener("click",L),d.ref.modal.addEventListener("keydown",L),d.ref.modal.addEventListener("click",(function(t){var e=document.querySelector(".backdrop-info");t.target===t.currentTarget&&(d.ref.modal.classList.toggle("is-hidden"),d.ref.modalWrap.innerHTML="",document.body.style.overflow="",e.style.backgroundImage="",document.removeEventListener("keydown",L))})),r("e5miy"),r("eOhzM"),r("78qpV"),r("dRVRr")}();
//# sourceMappingURL=my-library.d3bd5021.js.map
