{"mappings":"oeAGAA,EAAA,S,4CCAA,IAAAC,EAAAD,EAAA,S,sDAmBA,SAASE,EAAKC,GACZ,IACE,MAAMC,EAAkBC,aAAaC,QAAQH,GAC7C,OAA2B,OAApBC,OAA2BG,EAAYC,KAAKC,MAAML,E,CACzD,MAAOM,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,EAI7C,IACEC,SAASC,iBAAiB,oBAU5B,WACEC,EAAAC,IAAIC,YAAYC,UAAUC,IAAI,cACVN,SAASO,cAAc,eAA3C,MAGMC,EAAenB,EAAKoB,EAAAC,sBAG1B,QAAqBhB,IAAjBc,EACF,OAIFG,EAAmBH,E,IAtBnBN,EAAAC,IAAIS,kBAAkBX,iBAAiB,SAwBlC,SAA2BY,GAChCX,EAAAC,IAAIS,kBAAkBE,MAAMC,gBAAkB,UAC9Cb,EAAAC,IAAIC,YAAYY,UAAY,GAC5B,MAAMR,EAAenB,EAAKoB,EAAAC,sBAE1B,QAAqBhB,IAAjBc,EACF,OAGFG,EAAmBH,E,IAhCnBN,EAAAC,IAAIc,gBAAgBhB,iBAAiB,SAkChC,SAAyBY,GAC9BX,EAAAC,IAAIS,kBAAkBE,MAAMC,gBAAkB,UAC9Cb,EAAAC,IAAIC,YAAYY,UAAY,GAC5B,MAAME,EAAa7B,EAAKoB,EAAAU,oBAExB,QAAmBzB,IAAfwB,EACF,OAGFP,EAAmBO,E,IA1CnBhB,EAAAC,IAAIS,kBAAkBE,MAAMC,gBAAkB,S,CAE9C,MAAOlB,GACPC,QAAQsB,IAAIvB,E,CA2CdwB,eAAeV,EAAmBW,GAChC,IAEE,MAAMC,EAAkBD,EAAIE,KAAIH,MAAMI,SAAY,EAAArC,EAAAsC,eAAcD,KAC1DE,QAAaC,QAAQC,IAAIN,IAE/B,EAAAO,EAAAC,2BAA0B7B,EAAAC,IAAKwB,E,CAC/B,MAAOK,GACPlC,QAAQsB,IAAIY,E","sources":["src/indexLibrary.js","src/js/library.js"],"sourcesContent":["// Стили\n\n// Скрипты\nimport './js/api/api-vars';\nimport './js/api/fetch';\nimport './js/references/ref';\n// import './js/fetchAndRenderPopularFilm';\n\nimport './js/render/renderFilmByIdForLibrary';\nimport './js/render/modal-students';\nimport './js/library';\nimport './js/authentication/authentication';\n\nimport './js/modal';\nimport './js/localStorage';\n\n// import './js/requests/searchFilms';\nimport './js/render/renderSearchFilms';\n\n// Переключатель темы\nimport './js/switcher';\nimport './js/authentication/authentication';\n","// import { Notify } from 'notiflix/build/notiflix-notify-aio';\n// import { fetchTrendedFilms } from './api/fetch';\n// import { fetchSearchedFilms } from './api/fetch';\nimport { fetchFilmById } from './api/fetch';\nimport { fetchFilmGenres } from './api/fetch';\n// import { renderPopularFilms } from './render/renderPopularFilm';\nimport { renderFilmsByIdForLibrary } from './render/renderFilmByIdForLibrary';\n// import { renderFilms } from './render/renderHTML';\nimport { ref } from './references/ref';\n// import { options, pagination } from './pagination';\nimport { LOCALSTORAGE_WATCHED, LOCALSTORAGE_QUEUE } from './api/api-vars';\n\n// let textContent = '';\n// const  LOCALSTORAGE_WATCHED =  \"watched\";\n// const  LOCALSTORAGE_QUEUE =  \"queue\";\n\n// const dyk = [800815];\n// \t  localStorage.setItem(LOCALSTORAGE_WATCHED, JSON.stringify(dyk));\n\n// const qyk = [653851];\n// localStorage.setItem(LOCALSTORAGE_QUEUE, JSON.stringify(qyk));\n\nfunction load(key) {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n}\n\ntry {\n  document.addEventListener('DOMContentLoaded', onDOMContentLoaded);\n  ref.libraryWatchedBtn.addEventListener('click', onClickWatchedBtn);\n  ref.libraryQueueBtn.addEventListener('click', onClickQueueBtn);\n  ref.libraryWatchedBtn.style.backgroundColor = '#ff6b01';\n  \n} catch (error) {\n  console.log(error);\n}\n// ref.libraryWatchedBtn.classList.add(\"modal-btn-rev\")\n\nfunction onDOMContentLoaded() {\n  ref.galleryList.classList.add(\"movie-list\");\n  const libraryList = document.querySelector('.movie-list');\n//   console.log(ref.libraryList);\n//   console.log(load(LOCALSTORAGE_WATCHED));\n  const arrayWatched = load(LOCALSTORAGE_WATCHED);\n//   console.log(arrayWatched);\n\n  if (arrayWatched === undefined) {\n    return;\n  }\n  // // console.log(arrayWatched);\n  // const ars =arrayWatched.map(ar => ar.id);\n  fetchAndRenderFilm(arrayWatched);\n}\nexport function onClickWatchedBtn(e) {\n  ref.libraryWatchedBtn.style.backgroundColor = '#ff6b01';\n  ref.galleryList.innerHTML = '';\n  const arrayWatched = load(LOCALSTORAGE_WATCHED);\n  // console.log(arrayWatched);\n  if (arrayWatched === undefined) {\n    return;\n  }\n  // const ars = arrayWatched.map(ar => ar.id);\n  fetchAndRenderFilm(arrayWatched);\n}\nexport function onClickQueueBtn(e) {\n  ref.libraryWatchedBtn.style.backgroundColor = '#000000';\n  ref.galleryList.innerHTML = '';\n  const arrayQueue = load(LOCALSTORAGE_QUEUE);\n  // console.log(arrayQueue);\n  if (arrayQueue === undefined) {\n    return;\n  }\n  // const ars = arrayQueue.map(ar => ar.id);\n  fetchAndRenderFilm(arrayQueue);\n}\n// const ids = [550, 299536, 383498];\n// console.log(ids.map(id => console.log(id)));\nasync function fetchAndRenderFilm(ids) {\n  try {\n    // console.log(ids);\n    const arrayOfPromises = ids.map(async id => await fetchFilmById(id));\n    const data = await Promise.all(arrayOfPromises);\n    //   console.log(data);\n    renderFilmsByIdForLibrary(ref, data);\n  } catch (error) {\n    console.log(error);\n  }\n}\n"],"names":["parcelRequire","$i2Aqx","$1cafa503bc57b7a0$var$load","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","console","message","document","addEventListener","$3IenU","ref","galleryList","classList","add","querySelector","arrayWatched","$edYM8","LOCALSTORAGE_WATCHED","$1cafa503bc57b7a0$var$fetchAndRenderFilm","libraryWatchedBtn","e","style","backgroundColor","innerHTML","libraryQueueBtn","arrayQueue","LOCALSTORAGE_QUEUE","log","async","ids","arrayOfPromises","map","id","fetchFilmById","data","Promise","all","$8RrMY","renderFilmsByIdForLibrary","error1"],"version":3,"file":"my-library.904fbb02.js.map"}