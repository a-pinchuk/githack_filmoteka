{"mappings":"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","sources":["src/index.js","src/js/fetchAndRenderPopularFilm.js","src/js/render/renderPopularFilm.js","src/js/requests/searchFilms.js","src/js/pagination.js","src/js/scroll-to-top.js"],"sourcesContent":["// Стили\n\n// Скрипты\nimport './js/api/apiVars';\nimport './js/api/fetch';\nimport './js/references/ref';\nimport './js/fetchAndRenderPopularFilm';\nimport './js/render/modal-students';\nimport './js/modal';\nimport './js/localStorage';\nimport './js/requests/searchFilms';\nimport './js/render/renderSearchFilms';\nimport './js/scroll-to-top';\nimport './js/pagination';\n// Переключатель темы\nimport './js/switcher';\nimport './js/authentication/authentication';\n","import { fetchTrendedFilms, fetchFilmGenres } from './api/fetch';\nimport { renderPopularFilms } from './render/renderPopularFilm';\nimport { ref } from './references/ref';\nimport { loaderHide } from './loader';\nexport {fetchAndRenderPopularFilm}\n\nfetchAndRenderPopularFilm();\n\nasync function fetchAndRenderPopularFilm(page) {\n  try {\n    ref.loader.style.display = 'flex';\n    const image = await fetchTrendedFilms(page);\n    const genres = await fetchFilmGenres();\n    const data = image.data.results;\n    const genresID = genres.data.genres;\n\n    renderPopularFilms(ref, data, genresID);\n    loaderHide();\n  } catch (error) {\n    console.log(error);\n  }\n}\n","export function renderPopularFilms(ref, data, genres) {\n  const markup = data\n    .map(el => {\n      const genreId = el.genre_ids;\n      const movieGenres = compareGenresId(genres, genreId);\n      return `\n      <li class=\"photo__card\" data-modal-open id=\"${el.id}\">\n            <img src=\"https://image.tmdb.org/t/p/w500/${el.poster_path}\" alt=\"${\n        el.title\n      }\" \"loading=\"lazy\" class=\"movie__image\" width=\"500\" height=\"750\"/>\n            <span class=\"movie__rating\">${el.vote_average.toFixed(1)}</span>\n          <div class=\"movie__info\">\n            <p class=\"film__title\">${el.title}</p>\n            <div class=\"movie__details\">\n            <p class=\"movie__genre\">${movieGenres}</p>\n            <p class=\"movie__year\">| ${el.release_date.slice(0, 4)}</p>\n          </div>\n          </div>\n      </li>`;\n    })\n    .join('');\n\n  ref.galleryList.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction compareGenresId(allGenres, filmGenre) {\n  let arrayOfGenres = [];\n  allGenres.forEach(el => {\n    if (filmGenre.includes(el.id)) {\n      arrayOfGenres.push(el.name);\n    }\n  });\n  if (arrayOfGenres.length > 3) {\n    arrayOfGenres = arrayOfGenres.splice(0, 2).join(', ') + ', Other';\n    return arrayOfGenres;\n  }\n\n  return arrayOfGenres.join(', ');\n}\n","import { createMarkUp } from '../render/renderSearchFilms';\nimport { fetchSearchedFilms } from '../api/fetch';\nimport { ref } from '../references/ref';\nimport { Notify } from 'notiflix';\nimport { PAGE } from '../api/apiVars';\nimport { renderPopularFilms } from '../render/renderPopularFilm';\nimport { loaderHide } from '../loader';\nimport { showPaginationSearched } from '../pagination';\nexport {renderSearchFilms}\n\nlet searchQuery = '';\nref.form.addEventListener('submit', onCLickSubmit)\n\nfunction onCLickSubmit(e) {\n  e.preventDefault();\n  searchQuery = ref.input.value.trim();\n  ref.loader.style.display = 'flex';\n  if (searchQuery === '') {\n    loaderHide();\n    ref.alertMessage.textContent =\n      'Searching starts after providing data to search';\n    Notify.warning('Searching starts after providing data to search.');\n    return;\n  }\n  if (searchQuery.length > 0) {\n    ref.alertMessage.textContent = '';\n    ref.input.value = '';\n    renderSearchFilms().then(res => {\n      showPaginationSearched(res.data.total_pages);\n    });\n  } else {\n    renderPopularFilms();\n  }\n}\n\nasync function renderSearchFilms(page) {\n  try {\n    const promis = await fetchSearchedFilms(searchQuery, page);\n\n    const data = promis.data.results;\n    //  const paginationData = promis.data;\n\n    if (data.length === 0) {\n      loaderHide();\n      ref.alertMessage.textContent =\n        'Search result not successful. Enter the correct movie name and ';\n      return Notify.warning(\n        'Search result not successful. Enter the correct movie name and '\n      );\n    }\n    ref.alertMessage.textContent = '';\n    ref.loader.style.display = 'flex';\n    clearGallery();\n    // paginationPage(paginationData);\n    createMarkUp(ref, data);\n    loaderHide();\n    return promis;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction clearGallery() {\n  ref.galleryList.innerHTML = '';\n}\n\n","// import Pagination from 'tui-pagination';\n// import 'tui-pagination/dist/tui-pagination.css';\n// import { renderSearchFilms } from './requests/searchFilms';\n// import { ref } from './references/ref';\n// import { darkmode } from './switcher';\n// import { fetchAndRenderPopularFilm } from './fetchAndRenderPopularFilm';\n// import { renderSearchFilms } from './requests/searchFilms';\n// export { showPagination };\n\n\n// const containerPopular = document.getElementById('pagination');\n// const containerSearch = document.getElementById('pagination-search')\n\n// containerSearch.style.display = 'none'\n\n\n\n// if (darkmode) {\n//   ref.paginationRef.classList.add('pagination-btns-dark-theme');\n// }\n\n// const options = {\n//   totalItems: 200,\n//   itemsPerPage: 1,\n//   visiblePages: 5,\n//   page: 1,\n//   centerAlign: true,\n//   firstItemClassName: 'pagination-first-button',\n//   lastItemClassName: 'pagination-last-button',\n\n//   template: {\n//     page: '<a href=\"#\" class=\"pagination-page-button\">{{page}}</a>',\n//     currentPage: '<a class=\"pagination-active-button\">{{page}}</a>',\n//     moveButton:\n//       '<a href=\"#\" class=\"pagination-next-button\">' +\n//       '<span class=\"pag-ico-{{type}}\">{{type}}</span>' +\n//       '</a>',\n//     disabledMoveButton:\n//       '<span class=\"pagination-disabled-button\">' +\n//       '<span class=\"pag-ico-{{type}}\">{{type}}</span>' +\n//       '</span>',\n//     moreButton:\n//       '<a href=\"#\" class=\"pagination-more-button\">' +\n//       '<span class=\"pag-ico-more\"> </span>' +\n//       '</a>',\n//   },\n// };\n\n\n// //пагінація для трендів\n// const pagination = new Pagination(containerPopular, options)\n\n// pagination.on('afterMove', onPaginationMove);\n\n// function onPaginationMove({ page }) { \n//   ref.galleryList.innerHTML = ''\n//   fetchAndRenderPopularFilm(page)\n//   // renderSearchFilms(page)\n//    window.scrollTo({\n//     top: 0,\n//     behavior: 'smooth',\n//   });\n// }\n\n// function showPagination(totalPages) {\n//   pagination.setTotalItems(totalPages);\n//   pagination.movePageTo(options.page);\n//   ref.paginationRef.style.display = 'flex';\n// }\n\n\n// function showPaginationTrended(totalPages) {\n//   pagination.setTotalItems(totalPages)\n//   pagination.movePageTo(options.page)\n//   ref.paginationRef.style.display = 'flex'\n//   ref.paginationSearchRef.style.display = 'none'\n// }\n\n\n// //пагінація для пошуку \n\n// const paginationSearch = new Pagination(containerSearch, options)\n\n// paginationSearch.on('afterMove', onPaginationSearchMove)\n\n// function onPaginationSearchMove ({page}) {\n//   renderSearchFilms(page)\n//    window.scrollTo({\n//     top: 0,\n//     behavior: 'smooth',\n//   });\n// }\n\n// function showPaginationSearched(totalPages) {\n//   paginationSearch.setTotalItems(totalPages)\n//   paginationSearch.movePageTo(options.page)\n//   ref.paginationRef.style.display = 'none'\n//   ref.paginationSearchRef.style.display = 'flex'\n// }\n\n// // пагінація для watched\n\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\n\nimport { renderSearchFilms } from './requests/searchFilms';\nimport { ref } from './references/ref';\nimport { darkmode } from './switcher';\nimport { fetchAndRenderPopularFilm } from './fetchAndRenderPopularFilm';\nexport {showPaginationTrended}\nexport {showPaginationSearched}\n\n\n\nconst containerPopular = document.getElementById('pagination');\nconst containerSearch = document.getElementById('pagination-search')\n\ncontainerSearch.style.display = 'none'\n\nif(darkmode) {\n  ref.paginationRef.classList.add('pagination-btns-dark-theme')\n  ref.paginationSearchRef.classList.add('pagination-btns-dark-theme')\n}\n\n\nconst options = {\n  totalItems: 200,\n  itemsPerPage: 1,\n  visiblePages: 5,\n  page: 1,\n  centerAlign: true,\n  firstItemClassName: 'pagination-first-button',\n  lastItemClassName: 'pagination-last-button',\n\n  template: {\n    page: '<a href=\"#\" class=\"pagination-page-button\">{{page}}</a>',\n    currentPage: '<a class=\"pagination-active-button\">{{page}}</a>',\n    moveButton:\n      '<a href=\"#\" class=\"pagination-next-button\">' +\n        '<span class=\"pag-ico-{{type}}\">{{type}}</span>' +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"pagination-disabled-button\">' +\n        '<span class=\"pag-ico-{{type}}\">{{type}}</span>' +\n      '</span>',\n      moreButton:\n      '<a href=\"#\" class=\"pagination-more-button\">' +\n        '<span class=\"pag-ico-more\"> </span>' +\n      '</a>'\n\n  }}\n//пагінація для трендів\nconst pagination = new Pagination(containerPopular, options)\n\npagination.on('afterMove', onPaginationMove);\n\nfunction onPaginationMove({ page }) { \n  ref.galleryList.innerHTML = ''\n  fetchAndRenderPopularFilm(page)\n  // renderSearchFilms(page)\n   window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n\nfunction showPaginationTrended(totalPages) {\n  pagination.setTotalItems(totalPages)\n  pagination.movePageTo(options.page)\n  ref.paginationRef.style.display = 'flex'\n  ref.paginationSearchRef.style.display = 'none'\n}\n\n\n//пагінація для пошуку \n\nconst paginationSearch = new Pagination(containerSearch, options)\n\npaginationSearch.on('afterMove', onPaginationSearchMove)\n\nfunction onPaginationSearchMove ({page}) {\n  ref.galleryList.innerHTML = ''\n  renderSearchFilms(page)\n   window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n\nfunction showPaginationSearched(totalPages) {\n  paginationSearch.setTotalItems(totalPages)\n  paginationSearch.movePageTo(options.page)\n  ref.paginationRef.style.display = 'none'\n  ref.paginationSearchRef.style.display = 'flex'\n}","const scrollUp = document.querySelector('.scroll-up');\nconst scrollUpSirclePath = document.querySelector('.scroll-up__sircle-path');\nconst pathLength = scrollUpSirclePath.getTotalLength();\nconst offset = 400;\n\nscrollUpSirclePath.style.strokeDasharray = `${pathLength} ${pathLength}`;\nscrollUpSirclePath.style.transition = 'stroke-dashoffset 20ms';\n\nscrollUp.addEventListener('click', onScrollUp);\nwindow.addEventListener('scroll', onWindowScroll);\n\nfunction onScrollUp() {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n\nfunction onWindowScroll() {\n  updateDashoffset();\n\n  if (getScrollValue() >= offset) {\n    scrollUp.classList.add('scroll-up--active');\n  } else {\n    scrollUp.classList.remove('scroll-up--active');\n  }\n}\n\nfunction getScrollValue() {\n  return window.pageYOffset || document.documentElement.scrollTop;\n}\n\nfunction updateDashoffset() {\n  const height = document.documentElement.scrollHeight - window.innerHeight;\n  const dashoffset = pathLength - (getScrollValue() * pathLength) / height;\n\n  scrollUpSirclePath.style.strokeDashoffset = dashoffset;\n}\n"],"names":["parcelRequire","$i2Aqx","$a68be706538f4318$export$14c15ac6e78b66e1","ref","data","genres","markup","map","el","genreId","genre_ids","movieGenres","allGenres","filmGenre","arrayOfGenres","forEach","includes","id","push","name","length","splice","join","$a68be706538f4318$var$compareGenresId","poster_path","title","vote_average","toFixed","release_date","slice","galleryList","insertAdjacentHTML","async","$3bcff6c8bc9d80db$export$8a805042a4b718d5","page","$3IenU","loader","style","display","image","fetchTrendedFilms","fetchFilmGenres","results","genresID","$gjiCh","loaderHide","error","console","log","$ccLkp","$fb9GJ","$1bab9c519cfa82bc$var$containerPopular","document","getElementById","$1bab9c519cfa82bc$var$containerSearch","$1iCTa","darkmode","paginationRef","classList","add","paginationSearchRef","$1bab9c519cfa82bc$var$options","totalItems","itemsPerPage","visiblePages","centerAlign","firstItemClassName","lastItemClassName","template","currentPage","moveButton","disabledMoveButton","moreButton","$1bab9c519cfa82bc$var$pagination","$parcel$interopDefault","on","innerHTML","window","scrollTo","top","behavior","$1bab9c519cfa82bc$var$paginationSearch","$55c36a27b0bd9885$export$d12e25a4edbd6dcb","$55c36a27b0bd9885$var$searchQuery","promis","fetchSearchedFilms","alertMessage","textContent","$eWCmQ","Notify","warning","createMarkUp","form","addEventListener","e","preventDefault","input","value","trim","then","res","totalPages","total_pages","setTotalItems","movePageTo","$9c4d348a70143412$var$scrollUp","querySelector","$9c4d348a70143412$var$scrollUpSirclePath","$9c4d348a70143412$var$pathLength","getTotalLength","$9c4d348a70143412$var$getScrollValue","pageYOffset","documentElement","scrollTop","strokeDasharray","transition","height","scrollHeight","innerHeight","dashoffset","strokeDashoffset","$9c4d348a70143412$var$updateDashoffset","remove"],"version":3,"file":"index.6d6459f4.js.map"}